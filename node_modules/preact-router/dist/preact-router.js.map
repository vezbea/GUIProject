{"version":3,"file":null,"sources":["../src/util.js","../src/index.js"],"sourcesContent":["\nconst EMPTY = {};\n\nexport function exec(url, route, opts=EMPTY) {\n\tlet reg = /(?:\\?([^#]*))?(#.*)?$/,\n\t\tc = url.match(reg),\n\t\tmatches = {},\n\t\tret;\n\tif (c && c[1]) {\n\t\tlet p = c[1].split('&');\n\t\tfor (let i=0; i<p.length; i++) {\n\t\t\tlet r = p[i].split('=');\n\t\t\tmatches[decodeURIComponent(r[0])] = decodeURIComponent(r.slice(1).join('='));\n\t\t}\n\t}\n\turl = segmentize(url.replace(reg, ''));\n\troute = segmentize(route || '');\n\tlet max = Math.max(url.length, route.length);\n\tfor (let i=0; i<max; i++) {\n\t\tif (route[i] && route[i].charAt(0)===':') {\n\t\t\tlet param = route[i].replace(/(^\\:|[+*?]+$)/g, ''),\n\t\t\t\tflags = (route[i].match(/[+*?]+$/) || EMPTY)[0] || '',\n\t\t\t\tplus = ~flags.indexOf('+'),\n\t\t\t\tstar = ~flags.indexOf('*'),\n\t\t\t\tval = url[i] || '';\n\t\t\tif (!val && !star && (flags.indexOf('?')<0 || plus)) {\n\t\t\t\tret = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatches[param] = decodeURIComponent(val);\n\t\t\tif (plus || star) {\n\t\t\t\tmatches[param] = url.slice(i).map(decodeURIComponent).join('/');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\telse if (route[i]!==url[i]) {\n\t\t\tret = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (opts.default!==true && ret===false) return false;\n\treturn matches;\n}\n\nexport function pathRankSort(a, b) {\n\tlet aAttr = a.attributes || EMPTY,\n\t\tbAttr = b.attributes || EMPTY;\n\tif (aAttr.default) return 1;\n\tif (bAttr.default) return -1;\n\tlet diff = rank(aAttr.path) - rank(bAttr.path);\n\treturn diff || (aAttr.path.length - bAttr.path.length);\n}\n\nexport function segmentize(url) {\n\treturn strip(url).split('/');\n}\n\nexport function rank(url) {\n\treturn (strip(url).match(/\\/+/g) || '').length;\n}\n\nexport function strip(url) {\n\treturn url.replace(/(^\\/+|\\/+$)/g, '');\n}\n","import { h, Component } from 'preact';\nimport { exec, pathRankSort } from './util';\n\nlet customHistory = null;\n\nconst ROUTERS = [];\n\nconst EMPTY = {};\n\n// hangs off all elements created by preact\nconst ATTR_KEY = typeof Symbol!=='undefined' ? Symbol.for('preactattr') : '__preactattr_';\n\n\nfunction isPreactElement(node) {\n\treturn ATTR_KEY in node;\n}\n\nfunction setUrl(url, type='push') {\n\tif (customHistory && customHistory[type]) {\n\t\tcustomHistory[type](url);\n\t}\n\telse if (typeof history!=='undefined' && history[type+'State']) {\n\t\thistory[type+'State'](null, null, url);\n\t}\n}\n\n\nfunction getCurrentUrl() {\n\tlet url;\n\tif (customHistory && customHistory.location) {\n\t\turl = customHistory.location;\n\t}\n\telse if (customHistory && customHistory.getCurrentLocation) {\n\t\turl = customHistory.getCurrentLocation();\n\t}\n\telse {\n\t\turl = typeof location!=='undefined' ? location : EMPTY;\n\t}\n\treturn `${url.pathname || ''}${url.search || ''}`;\n}\n\n\nfunction route(url, replace=false) {\n\tif (typeof url!=='string' && url.url) {\n\t\treplace = url.replace;\n\t\turl = url.url;\n\t}\n\n\t// only push URL into history if we can handle it\n\tif (canRoute(url)) {\n\t\tsetUrl(url, replace ? 'replace' : 'push');\n\t}\n\n\treturn routeTo(url);\n}\n\n\n/** Check if the given URL can be handled by any router instances. */\nfunction canRoute(url) {\n\tfor (let i=ROUTERS.length; i--; ) {\n\t\tif (ROUTERS[i].canRoute(url)) return true;\n\t}\n\treturn false;\n}\n\n\n/** Tell all router instances to handle the given URL.  */\nfunction routeTo(url) {\n\tlet didRoute = false;\n\tfor (let i=0; i<ROUTERS.length; i++) {\n\t\tif (ROUTERS[i].routeTo(url)===true) {\n\t\t\tdidRoute = true;\n\t\t}\n\t}\n\treturn didRoute;\n}\n\n\nfunction routeFromLink(node) {\n\t// only valid elements\n\tif (!node || !node.getAttribute) return;\n\n\tlet href = node.getAttribute('href'),\n\t\ttarget = node.getAttribute('target');\n\n\t// ignore links with targets and non-path URLs\n\tif (!href || !href.match(/^\\//g) || (target && !target.match(/^_?self$/i))) return;\n\n\t// attempt to route, if no match simply cede control to browser\n\treturn route(href);\n}\n\n\nfunction handleLinkClick(e) {\n\tif (e.button !== 0) return;\n\trouteFromLink(e.currentTarget || e.target || this);\n\treturn prevent(e);\n}\n\n\nfunction prevent(e) {\n\tif (e) {\n\t\tif (e.stopImmediatePropagation) e.stopImmediatePropagation();\n\t\tif (e.stopPropagation) e.stopPropagation();\n\t\te.preventDefault();\n\t}\n\treturn false;\n}\n\n\nfunction delegateLinkHandler(e) {\n\t// ignore events the browser takes care of already:\n\tif (e.ctrlKey || e.metaKey || e.altKey || e.shiftKey) return;\n\n\tlet t = e.target;\n\tdo {\n\t\tif (String(t.nodeName).toUpperCase()==='A' && t.getAttribute('href') && isPreactElement(t)) {\n\t\t\tif (e.button !== 0) return;\n\t\t\t// if link is handled by the router, prevent browser defaults\n\t\t\tif (routeFromLink(t)) {\n\t\t\t\treturn prevent(e);\n\t\t\t}\n\t\t}\n\t} while ((t=t.parentNode));\n}\n\n\nlet eventListenersInitialized = false;\n\nfunction initEventListeners() {\n\tif (eventListenersInitialized){\n\t\treturn;\n\t}\n\n\tif (typeof addEventListener==='function') {\n\t\tif (!customHistory) {\n\t\t\taddEventListener('popstate', () => routeTo(getCurrentUrl()));\n\t\t}\n\t\taddEventListener('click', delegateLinkHandler);\n\t}\n\teventListenersInitialized = true;\n}\n\n\nconst Link = (props) => {\n\treturn h('a', Object.assign({}, props, { onClick: handleLinkClick }));\n};\n\n\nclass Router extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tif (props.history) {\n\t\t\tcustomHistory = props.history;\n\t\t}\n\n\t\tthis.state = {\n\t\t\turl: this.props.url || getCurrentUrl()\n\t\t};\n\n\t\tinitEventListeners();\n\t}\n\n\tshouldComponentUpdate(props) {\n\t\tif (props.static!==true) return true;\n\t\treturn props.url!==this.props.url || props.onChange!==this.props.onChange;\n\t}\n\n\t/** Check if the given URL can be matched against any children */\n\tcanRoute(url) {\n\t\treturn this.getMatchingChildren(this.props.children, url, false).length > 0;\n\t}\n\n\t/** Re-render children with a new URL to match against. */\n\trouteTo(url) {\n\t\tthis._didRoute = false;\n\t\tthis.setState({ url });\n\n\t\t// if we're in the middle of an update, don't synchronously re-route.\n\t\tif (this.updating) return this.canRoute(url);\n\n\t\tthis.forceUpdate();\n\t\treturn this._didRoute;\n\t}\n\n\tcomponentWillMount() {\n\t\tROUTERS.push(this);\n\t\tthis.updating = true;\n\t}\n\n\tcomponentDidMount() {\n\t\tif (customHistory) {\n\t\t\tthis.unlisten = customHistory.listen((location) => {\n\t\t\t\tthis.routeTo(`${location.pathname || ''}${location.search || ''}`);\n\t\t\t});\n\t\t}\n\t\tthis.updating = false;\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (typeof this.unlisten==='function') this.unlisten();\n\t\tROUTERS.splice(ROUTERS.indexOf(this), 1);\n\t}\n\n\tcomponentWillUpdate() {\n\t\tthis.updating = true;\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.updating = false;\n\t}\n\n\tgetMatchingChildren(children, url, invoke) {\n\t\treturn children.slice().sort(pathRankSort).filter( ({ attributes }) => {\n\t\t\tlet path = attributes.path,\n\t\t\t\tmatches = exec(url, path, attributes);\n\t\t\tif (matches) {\n\t\t\t\tif (invoke!==false) {\n\t\t\t\t\tattributes.url = url;\n\t\t\t\t\tattributes.matches = matches;\n\t\t\t\t\t// copy matches onto props\n\t\t\t\t\tfor (let i in matches) {\n\t\t\t\t\t\tif (matches.hasOwnProperty(i)) {\n\t\t\t\t\t\t\tattributes[i] = matches[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n\n\trender({ children, onChange }, { url }) {\n\t\tlet active = this.getMatchingChildren(children, url, true);\n\n\t\tlet current = active[0] || null;\n\t\tthis._didRoute = !!current;\n\n\t\tlet previous = this.previousUrl;\n\t\tif (url!==previous) {\n\t\t\tthis.previousUrl = url;\n\t\t\tif (typeof onChange==='function') {\n\t\t\t\tonChange({\n\t\t\t\t\trouter: this,\n\t\t\t\t\turl,\n\t\t\t\t\tprevious,\n\t\t\t\t\tactive,\n\t\t\t\t\tcurrent\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current;\n\t}\n}\n\n\nconst Route = ({ component, url, matches }) => {\n\treturn h(component, { url, matches });\n};\n\n\nRouter.route = route;\nRouter.Router = Router;\nRouter.Route = Route;\nRouter.Link = Link;\n\nexport { route, Router, Route, Link };\nexport default Router;\n"],"names":["EMPTY","exec","url","route","opts","reg","c","match","matches","ret","p","split","i","length","r","decodeURIComponent","slice","join","segmentize","replace","max","Math","charAt","param","flags","plus","indexOf","star","val","map","default","pathRankSort","a","b","aAttr","attributes","bAttr","diff","rank","path","strip","customHistory","ROUTERS","ATTR_KEY","Symbol","for","isPreactElement","node","setUrl","type","history","getCurrentUrl","location","getCurrentLocation","pathname","search","canRoute","routeTo","didRoute","routeFromLink","getAttribute","href","target","handleLinkClick","e","button","currentTarget","prevent","stopImmediatePropagation","stopPropagation","preventDefault","delegateLinkHandler","ctrlKey","metaKey","altKey","shiftKey","t","String","nodeName","toUpperCase","parentNode","eventListenersInitialized","initEventListeners","addEventListener","Link","props","h","onClick","Router","state","shouldComponentUpdate","static","onChange","getMatchingChildren","children","_didRoute","setState","updating","forceUpdate","componentWillMount","push","componentDidMount","unlisten","listen","componentWillUnmount","splice","componentWillUpdate","componentDidUpdate","invoke","sort","filter","hasOwnProperty","render","active","current","previous","previousUrl","Component","Route","component"],"mappings":"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"}